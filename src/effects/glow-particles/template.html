<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Glow Particles</title>
    <meta
      name="description"
      content="A colorful particle system with glowing effects using Canvas 2D"
    />
    <meta name="keywords" content="SignalRGB, particles, canvas, effect" />
    <meta publisher="hyperb1iss" />

    <!-- Controls -->
    <meta
      property="speed"
      label="Animation Speed"
      type="number"
      min="1"
      max="10"
      default="3"
      tooltip="Controls the speed of the particles (1=Slow, 10=Fast)"
    />
    <meta
      property="particleCount"
      label="Particle Count"
      type="number"
      min="10"
      max="300"
      default="100"
      tooltip="Number of particles to display"
    />
    <meta
      property="particleSize"
      label="Particle Size"
      type="number"
      min="1"
      max="40"
      default="20"
      tooltip="Size of particles"
    />
    <meta
      property="glowIntensity"
      label="Glow Intensity"
      type="number"
      min="1"
      max="200"
      default="100"
      tooltip="Controls the intensity of the glow effect"
    />
    <meta
      property="colorMode"
      label="Color Mode"
      type="combobox"
      values="Aurora,Cyberpunk,Fire and Ice,Galaxy,Heat Map,Neon,Ocean,Pastel,Prism,Rainbow,Sunset,Synthwave"
      default="Rainbow"
      tooltip="Color palette for particles"
    />
    <meta
      property="flowDirection"
      label="Flow Direction"
      type="combobox"
      values="Outward,Circular,Left to Right,Right to Left,Top to Bottom,Bottom to Top,Random"
      default="Outward"
      tooltip="Primary direction of particle movement"
    />
    <meta
      property="connectParticles"
      label="Connect Particles"
      type="boolean"
      default="1"
      tooltip="Draw lines between nearby particles"
    />
    <meta
      property="connectorGlow"
      label="Connector Intensity"
      type="number"
      min="1"
      max="200"
      default="100"
      tooltip="Controls the intensity and thickness of particle connections"
    />
    <meta
      property="particleBounce"
      label="Bounce Off Edges"
      type="boolean"
      default="1"
      tooltip="Particles bounce off edges instead of wrapping around"
    />
    <meta
      property="colorSaturation"
      label="Color Saturation"
      type="number"
      min="1"
      max="200"
      default="100"
      tooltip="Adjust color saturation level (100=Normal)"
    />
    <meta
      property="colorIntensity"
      label="Color Intensity"
      type="number"
      min="1"
      max="200"
      default="100"
      tooltip="Adjust color intensity/brightness (100=Normal)"
    />
    <style>
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background-color: #000;
      }
      canvas {
        display: block;
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <canvas id="exCanvas" width="320" height="200"></canvas>

    <script>
      // Simple log helper
      function log(msg, data) {
        if (typeof console !== "undefined") {
          console.log("[GlowParticles] " + msg, data || "");
        }
      }

      // Add explicit debug for animation
      console.log("‚ö° GlowParticles template loaded");

      // Override requestAnimationFrame temporarily to check if it's being called
      const originalRAF = window.requestAnimationFrame;
      let frameCount = 0;

      window.requestAnimationFrame = function (callback) {
        frameCount++;
        if (frameCount % 60 === 0) {
          console.log("üîÑ Animation frame: " + frameCount);
        }
        return originalRAF(callback);
      };

      // Override window.update to check if it's being called
      const originalUpdate = window.update;
      window.update = function (force) {
        console.log("üìä Update called", { force });
        if (typeof originalUpdate === "function") {
          return originalUpdate(force);
        }
      };

      // Log initial values from SignalRGB
      log("Initial values received", {
        speed: typeof speed !== "undefined" ? speed : 3,
        particleCount:
          typeof particleCount !== "undefined" ? particleCount : 100,
        glowIntensity:
          typeof glowIntensity !== "undefined" ? glowIntensity : 100,
        // and so on...
      });

      // Initialize the effect (included in the bundle)
      <!-- BUNDLE_SCRIPT_INJECT -->

      // Check if initialization happened
      setTimeout(function () {
        console.log("üîç Checking initialization status:", {
          effectInstance: typeof window.effectInstance !== "undefined",
          currentAnimationFrame: window.currentAnimationFrame,
          update: typeof window.update === "function",
          controls: window.controlsCount || 0,
        });
      }, 1000);
    </script>
  </body>
</html>
